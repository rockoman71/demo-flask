node { 
    def app
    def image = 'demo-flask'
    def jenkinsCredentials = 'docker'
    def gitRepo = "https://github.com/rockoman71/demo-flask.git"
    
    stage('Get Source') {
		   git gitRepo
	  }
   
    stage('Build image') {
        /* This builds the actual image; synonymous to
         * docker build on the command line */
     	//sh "sed -i "'s/ver/ver1/g'" Dockerfile"    
	//sh 'cp Dockerfile2 Dockerfile'    
        app = docker.build(image, "--build-arg ver=${BUILD_NUMBER} ./docker")
    } 
}
